name: transcendence

services:
  reverse-proxy:
    build: ../infrastructure/reverse-proxy/
    ports:
      - "8080:80"
    networks:
      - microservices-network
    depends_on:
      - gateway
    restart: "no"

  gateway:
    build: ../services/gateway
    ports:
      - "3000"
    networks:
      - microservices-network
    depends_on:
      - authentication
      - game-orchestration
    restart: "no"

  authentication:
    build: ../services/authentication
    ports:
      - "3001"
    networks:
      - microservices-network
      # - vault-network
    restart: "no"
    # depends_on:
    #   -hashicorp-vault

  # hashicorp-vault:
  #   build: ../infrastructure/hashicorp-vault
  #   ports:
  #     - "8200"
  #   networks:
  #     - vault-network
  #   volumes:
  #     - vault-data:/vault/data
  #     - ./vault-config:/vault/config
  #   restart: unless-stopped

  game-orchestration:
    build: ../services/game-orchestration
    ports:
      - "3002"
    networks:
      - microservices-network
    restart: "no"

networks:
  microservices-network:
    driver: bridge

  # vault-network:
  #   driver: bridge
  #   internal: true

  # monitoring-network:
  #   driver: bridge
  #   internal: true

  # logging-network:
  #   driver: bridge
  #   internal: true

# volumes:
#   vault-data:
#   prometheus-data:
#   grafana-data:
#   elasticsearch-data:
